<Window x:Class="Online_Doctor_Appointment_System.Views.AppointmentWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Online_Doctor_Appointment_System.Views"
        mc:Ignorable="d"
        Title="Записи к варачам" Height="1037.2" Width="1100" WindowState="Maximized">
    <Grid Background="{DynamicResource {x:Static SystemColors.GradientInactiveCaptionBrushKey}}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <!-- Все пространство для правой и левой колонок -->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400"/>
            <ColumnDefinition Width="*"/>
            <!-- DataGrid займет всё оставшееся пространство -->
        </Grid.ColumnDefinitions>

        <!-- Левая панель с ScrollViewer -->
        <ScrollViewer Grid.Row="0" Grid.Column="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel>
                <!-- Первый GroupBox с данными -->
                <GroupBox Header="Данные" Margin="5" FontSize="16" Foreground="#FF7B16B6" BorderBrush="#FF7B16B6">
                    <StackPanel Margin="10">
                        <StackPanel Margin="0,5">
                            <Label Content="Тип приёма" FontSize="16" Foreground="#FF7B16B6"/>
                            <ComboBox Style="{StaticResource PrimaryCB}" Name="TypeOfReceptionCB" SelectionChanged="TypeOfReceptionCB_SelectionChanged">
                                <ComboBoxItem>Приём в поликлинике</ComboBoxItem>
                                <ComboBoxItem>Выезд врача на дом</ComboBoxItem>
                                <ComboBoxItem>Онлайн консультация</ComboBoxItem>
                            </ComboBox>
                        </StackPanel>
                        <StackPanel Margin="0,5">
                            <Label Content="Врач" FontSize="16" Foreground="#FF7B16B6"/>
                            <ComboBox Style="{StaticResource PrimaryCB}" Name="ProfDocCB"
                                TextSearch.TextPath="DoctorProfession"
                                IsEditable="True"/>
                        </StackPanel>
                        <StackPanel Margin="0,5">
                            <Label Content="Пациент" FontSize="16" Foreground="#FF7B16B6"/>
                            <ComboBox Style="{StaticResource PrimaryCB}" Name="PatFullNameCB"
                                TextSearch.TextPath="ShortName"
                                IsEditable="True"/>
                        </StackPanel>
                        <StackPanel Margin="0,5">
                            <Label Content="Диагноз" FontSize="16" Foreground="#FF7B16B6"/>
                            <TextBox Style="{StaticResource PrimaryTB}" Name="DiagnosisTB" 
                                 TextWrapping="Wrap"
                                 VerticalScrollBarVisibility="Auto"
                                 AcceptsReturn="True"
                                 IsReadOnly="True"
                                 MinHeight="60"/>
                        </StackPanel>
                        <Grid Margin="0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" Margin="0,5">
                                <Label Content="Статус" FontSize="16" Foreground="#FF7B16B6"/>
                                <ComboBox Style="{StaticResource PrimaryCB}" Name="StatusCB">
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Grid.Column="2" Margin="0,5">
                                <Label Content="Дата приёма" FontSize="16" Foreground="#FF7B16B6"/>
                                <DatePicker Style="{StaticResource PrimaryDP}" Name="DateAdmissionDP"/>
                            </StackPanel>
                        </Grid>
                        <Grid Margin="0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" Margin="0,5">
                                <Label Content="Начало приёма" FontSize="16" Foreground="#FF7B16B6"/>
                                <!-- TimePicker для времени начала -->
                                <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="StartTimeTB"
                                     Text="00:00"  
                                     MaxLength="5"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2" Margin="0,5">
                                <Label Content="Окончание приёма" FontSize="16" Foreground="#FF7B16B6"/>
                                <!-- TimePicker для времени окончания -->
                                <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="EndTimeTB"
                                     Text="00:00"
                                     MaxLength="5"/>
                            </StackPanel>
                        </Grid>
                        <StackPanel Margin="0,5">
                            <Label Content="Приписка" FontSize="16" Foreground="#FF7B16B6"/>
                            <TextBox Style="{StaticResource PrimaryTB}" Name="PostscriptTB" 
                                 TextWrapping="Wrap"
                                 VerticalScrollBarVisibility="Auto"
                                 AcceptsReturn="True"
                                 MinHeight="60"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

                <!-- Второй GroupBox с адресом -->
                <GroupBox Header="Адрес пациента" Name="PatAddressGB" Visibility="Collapsed" Margin="5" FontSize="16" Foreground="#FF7B16B6" BorderBrush="#FF7B16B6">
                    <StackPanel Margin="10">
                        <Grid Margin="0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" Margin="0,5">
                                <Label Content="Город" FontSize="16" Foreground="#FF7B16B6"/>
                                <!-- TimePicker для времени начала -->
                                <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="PatientCityTB"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2" Margin="0,5">
                                <Label Content="Улица" FontSize="16" Foreground="#FF7B16B6"/>
                                <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="PatientStreetTB"/>
                            </StackPanel>
                        </Grid>
                        <Grid Margin="0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" Margin="0,5">
                                <Label Content="Номер дома" FontSize="16" Foreground="#FF7B16B6"/>
                                <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="HouseNumberTB"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2" Margin="0,5">
                                <Label Content="Номер картиры" FontSize="16" Foreground="#FF7B16B6"/>
                                <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="AppartmentNumberTB"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Онлайн встреча" Name="OnlineDataGB" Visibility="Collapsed" Margin="5" FontSize="16" Foreground="#FF7B16B6" BorderBrush="#FF7B16B6">
                    <StackPanel Margin="10">
                        <StackPanel Grid.Column="0" Margin="0,5">
                                <Label Content="Ссылка" FontSize="16" Foreground="#FF7B16B6"/>
                                <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="LinkTB"/>
                            </StackPanel>
                        <StackPanel Grid.Column="2" Margin="0,5">
                            <Label Content="Код для подключения" FontSize="16" Foreground="#FF7B16B6"/>
                            <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="ConnectionCodeTB"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Приём в поликлинике" Name="InPersonGB" Margin="5" FontSize="16" Foreground="#FF7B16B6" BorderBrush="#FF7B16B6">
                    <StackPanel Margin="10">
                        <StackPanel Grid.Column="0" Margin="0,5">
                            <Label Content="Название больницы" FontSize="16" Foreground="#FF7B16B6"/>
                            <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="HospitalTB"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Margin="0,5">
                            <Label Content="Номер кабинета" FontSize="16" Foreground="#FF7B16B6"/>
                            <TextBox Style="{StaticResource PrimaryTB}" 
                                     Name="CabinetTB"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

                <!-- Кнопки под GroupBox -->
                <StackPanel Margin="5">
                    <UniformGrid Columns="2" Margin="0,10">
                        <Button Content="Добавить"
                            Name="AddRecordBtn"
                            Style="{StaticResource PrimaryBtn}"
                            Margin="5"
                            Padding="15,7" 
                            FontSize="14" Click="AddRecordBtn_Click"/>
                        <Button Content="Изменить"
                            Name="UpdateRecordBtn"
                            Style="{StaticResource SuccessBtn}"
                            Margin="5"
                            Padding="15,7" 
                            FontSize="14" Click="UpdateRecordBtn_Click"/>
                        <Button Content="Очистить"
                            Name="ClearRecordBtn"
                            Style="{StaticResource WarningBtn}"
                            Margin="5"
                            Padding="15,7" 
                            FontSize="14" Click="ClearRecordBtn_Click"/>
                        <Button Content="Удалить"
                            Name="DeleteRecordBtn"
                            Style="{StaticResource DangerBtn}"
                            Margin="5"
                            Padding="15,7" 
                            FontSize="14" Click="DeleteRecordBtn_Click"/>
                    </UniformGrid>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Правая колонка с поиском и DataGrid -->
        <Grid Grid.Row="0" Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Панель поиска -->
            <Grid Grid.Row="0" Margin="10,5,10,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Label Content="Поиск" 
                   FontSize="16" 
                   Foreground="#FF7B16B6" 
                   Grid.Column="0"
                   VerticalAlignment="Center"/>
                <TextBox Style="{StaticResource PrimaryTB}" 
                     Name="RecordSearchTB" 
                     Grid.Column="2" 
                     VerticalAlignment="Center" SelectionChanged="RecordSearchTB_SelectionChanged"/>
            </Grid>
            <Grid Grid.Row="1" Margin="10,5,10,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Label Content="Статус" 
                   FontSize="16" 
                   Foreground="#FF7B16B6" 
                   Grid.Column="0"
                   VerticalAlignment="Center"/>
                <ComboBox Style="{StaticResource PrimaryCB}"
                     SelectedIndex="0"
                     Name="StatusFilterCB" 
                     Grid.Column="2" SelectionChanged="StatusFilterCB_SelectionChanged">
                    
                </ComboBox>
            </Grid>

            <!-- DataGrid -->
            <DataGrid Grid.Row="2"
                  Margin="10,5,10,10" 
                  Name="RecordsDG" 
                  AutoGenerateColumns="False" 
                  IsReadOnly="True"
                  Style="{StaticResource PrimaryDataGrid}" SelectionChanged="RecordsDG_SelectionChanged">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Врач" 
        Binding="{Binding ActingDoctor.FullName}" 
        Width="150"
        HeaderStyle="{StaticResource PrimaryDataGridColumnHeader}"
        ElementStyle="{StaticResource PrimaryDataGridCellText}"
        CellStyle="{StaticResource PrimaryDataGridCell}"/>

                    <DataGridTextColumn Header="Пациент" 
        Binding="{Binding RecordedPatient.FullName}" 
        Width="150"
        HeaderStyle="{StaticResource PrimaryDataGridColumnHeader}"
        ElementStyle="{StaticResource PrimaryDataGridCellText}"
        CellStyle="{StaticResource PrimaryDataGridCell}"/>

                    <DataGridTextColumn Header="Дата" 
        Binding="{Binding FormattedDate}" 
        Width="80"
        HeaderStyle="{StaticResource PrimaryDataGridColumnHeader}"
        ElementStyle="{StaticResource PrimaryDataGridCellText}"
        CellStyle="{StaticResource PrimaryDataGridCell}"/>

                    <DataGridTextColumn Header="Время" 
        Binding="{Binding FormattedTimeRange}" 
        Width="100"
        HeaderStyle="{StaticResource PrimaryDataGridColumnHeader}"
        ElementStyle="{StaticResource PrimaryDataGridCellText}"
        CellStyle="{StaticResource PrimaryDataGridCell}"/>

                    <DataGridTextColumn Header="Статус" 
        Binding="{Binding DisplayedStatus}" 
        Width="100"
        HeaderStyle="{StaticResource PrimaryDataGridColumnHeader}"
        ElementStyle="{StaticResource PrimaryDataGridCellText}"
        CellStyle="{StaticResource PrimaryDataGridCell}"/>

                    <DataGridTextColumn Header="Приписка" 
        Binding="{Binding Postscript}" 
        Width="150"
        HeaderStyle="{StaticResource PrimaryDataGridColumnHeader}"
        ElementStyle="{StaticResource PrimaryDataGridCellText}"
        CellStyle="{StaticResource PrimaryDataGridCell}"/>

                    <DataGridTextColumn Header="Доп данные" 
        Binding="{Binding AdditionalInfo}" 
        Width="*"
        HeaderStyle="{StaticResource PrimaryDataGridColumnHeader}"
        ElementStyle="{StaticResource PrimaryDataGridCellText}"
        CellStyle="{StaticResource PrimaryDataGridCell}"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>
</Window>
